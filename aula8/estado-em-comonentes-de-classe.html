<!--

Aula 08 - Estado (State) em Componentes de Classe
Introdu√ß√£o

Nessa aula aprendemos um dos conceitos mais importantes do React: 
o estado (ou state em ingl√™s).
√â justamente o estado que faz o React ser t√£o poderoso, pois ele permite 
que a interface responda automaticamente √†s mudan√ßas de dados.

O que √© o estado em React?
. O estado √© como se fosse uma vari√°vel especial, que armazena valores de 
um componente.
. Diferente de uma vari√°vel comum, o state pertence somente ao componente 
onde foi criado.
. Sempre que o valor do estado muda, o React detecta a mudan√ßa e renderiza 
novamente o componente, atualizando a interface automaticamente.

üëâ Analogia divertida:
. Estado "solteiro" ‚Üí vida de festas, mais livre.
. Estado "casado" ‚Üí responsabilidades aumentam, vida mais caseira, √†s vezes at√© engorda.
. Se o estado mudar de novo para "solteiro", a vida se "re-renderiza" de forma diferente.


Inicializando o estado em componentes de classe:
Sempre que for usar estado em uma classe:
. O estado deve ser inicializado dentro do m√©todo constructor().
. Usamos this.state = { ... } para declarar os valores iniciais.
. O estado √© um objeto e pode ter v√°rios valores.
Exemplo:
class Destaques extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      nome: "Mikael"
    }
  }

  render() {
    return (
      <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
          <h1 class="display-5 fw-bold">{this.state.nome}</h1>
          <p class="col-md-8 fs-4">{this.props.texto}</p>
          <button class="btn btn-primary btn-lg" type="button">Example button</button>
        </div>
      </div>
    )
  }
}

üëâ Note que usamos this.state.nome para acessar o valor.



Como mudar o estado de valor?
Para alterar o estado, nunca mudamos this.state diretamente.
Devemos usar o m√©todo especial setState().


O que √© o setState()?
. √â um m√©todo fornecido pelo React.
. Permite atualizar o valor do estado de forma correta.
. Ao ser chamado, ele agenda uma atualiza√ß√£o e dispara uma nova renderiza√ß√£o do componente.

Maneira 1 ‚Äî Usando fun√ß√£o com prevState (RECOMENDADO):
Essa forma √© recomendada, pois garante que estamos sempre trabalhando com o 
estado mais recente (importante porque o estado √© ass√≠ncrono).

O que √© o prevState?
. Representa o estado anterior.
. Usamos quando queremos alterar o valor atual levando em conta o valor anterior.

Exemplo simples:
trocarNome = () => {
  this.setState(function(prevState) {
    return { nome: 'Lucas' }
  })
}

Exemplo com concatena√ß√£o do estado anterior:
trocarNome = () => {
  this.setState(function(prevState) {
    return { nome: prevState.nome + ' Gabriel' }
  })
}

üëâ Isso √© √∫til quando queremos acrescentar coisas ao valor antigo em vez 
de substitu√≠-lo totalmente.


Maneira 2 ‚Äî Atualizando diretamente no objeto:
Outra forma de usar setState √© passando direto um objeto.

Exemplo:
add = () => {
  this.setState({ count: this.state.count + 1 })
}

‚ö†Ô∏è Por√©m, essa forma n√£o √© recomendada, porque o React pode ainda n√£o ter 
atualizado o valor mais recente (estado √© ass√≠ncrono). Isso pode gerar 
resultados errados em opera√ß√µes que dependem do valor anterior.

üëâ Por isso, o ideal √© sempre usar a forma com fun√ß√£o e prevState.




Exemplo pr√°tico ‚Äì Criando um Contador
// COMPONENTE DE CLASSE
class Contador extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    }
  }

  add = () => {
    this.setState(function(prevState) {
      return { count: prevState.count + 1 }
    })
  }

  sub = () => {
    this.setState(function(prevState) {
      return { count: prevState.count - 1 }
    })
  }

  render() {
    return (
      <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
          <h1 class="display-5 fw-bold">Contador: {this.state.count}</h1>
          <p class="col-md-8 fs-4">Aprendendo State (Estado)</p>
          <div class="row gap-2">
            <button onClick={this.sub} class="col btn btn-danger btn-lg" type="button">Sub -</button>
            <button onClick={this.add} class="col btn btn-success btn-lg" type="button">Add +</button>
          </div>
        </div>
      </div>
    )
  }
}

function App() {
  return (
    <main>
      <div class="container py-4">
        <Contador />
      </div>
    </main>
  )
}
ReactDOM.render(<App />, document.getElementById('root'));


Explica√ß√£o do exemplo acima:

. O estado inicial (this.state.count) come√ßa em 0.
. O bot√£o "Add +" chama o m√©todo add, que incrementa o estado de count.
. O bot√£o "Sub -" chama o m√©todo sub, que decrementa o estado de count.
. Como o estado muda, o React re-renderiza o componente e o valor exibido em 
<h1> muda automaticamente.

üëâ Esse exemplo mostra claramente como o estado √© din√¢mico e como o React 
liga mudan√ßas de dados √† interface visual.

Resumindo
. O state √© um objeto que guarda valores exclusivos de cada componente.
. Mudan√ßas no state s√£o feitas com setState().
. prevState √© a forma recomendada de atualizar quando dependemos do valor anterior.
. Toda vez que o estado muda ‚Üí o componente √© re-renderizado.

üí° Extra dica minha: Hoje em dia, em projetos modernos, a forma mais comum de 
lidar com estado √© usando Hooks (useState) em componentes funcionais. Mas entender 
o state em classes √© essencial para compreender o funcionamento interno do React.

-->

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprendendo React</title>
    <!-- REACT VERSION 17.0.2-->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <link rel="stylesheet" href="index.css">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

</head>

<body>
    <div id="root"></div>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script src="app.js" type="text/babel"></script>
</body>

</html>